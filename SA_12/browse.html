<!doctype html>
<html class="no-js"  lang="en">

	<head>
		<!-- META DATA -->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        
		<!--font-family-->
		<link href="https://fonts.googleapis.com/css?family=Rufina:400,700" rel="stylesheet" />

		<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet" />

		<!-- TITLE OF SITE -->
		<title>Travel</title>

		<!-- favicon img -->
		<link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>

		<!--font-awesome.min.css-->
		<link rel="stylesheet" href="assets/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
		<!--animate.css-->
		<link rel="stylesheet" href="assets/css/animate.css" />

		<!--hover.css-->
		<link rel="stylesheet" href="assets/css/hover-min.css">

		<!--datepicker.css-->
		<link rel="stylesheet"  href="assets/css/datepicker.css" >

		<!--owl.carousel.css-->
        <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
		<link rel="stylesheet" href="assets/css/owl.theme.default.min.css"/>

		<!-- range css-->
        <link rel="stylesheet" href="assets/css/jquery-ui.min.css" />

		<!--bootstrap.min.css-->
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />

		<!-- bootsnav -->
		<link rel="stylesheet" href="assets/css/bootsnav.css"/>

		<!--style.css-->
		<link rel="stylesheet" href="assets/css/style.css" />

		<!--responsive.css-->
		<link rel="stylesheet" href="assets/css/responsive.css" />

		
        <style>
            .navfont{
                padding-top: 10px; background-color:transparent; border: none;color: #FFFFFF;
            }
            
            .fa:hover{
                color: rgb(64, 128, 128);
            }
        </style>
        
	</head>

	<body>
		
		<!-- main-menu Start -->
		<header class="top-area">
			<div class="header-area">
				<div class="container">
					<div class="row">
						<div class="col-sm-2">
							<div class="logo">
								<a href="browse.html">
									tour<span>Nest</span>
								</a>
							</div><!-- /.logo-->
						</div><!-- /.col-->
						<div class="col-sm-10">
							<div class="main-menu">
							
								
								<div class="navbar-header">
									<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
										<i class="fa fa-bars"></i>
									</button>
								</div>
								<div class="collapse navbar-collapse">		  
									<ul class="nav navbar-nav navbar-right">
										
										
                                        <li><button class="navfont"><i class="fa fa-instagram" style="font-size: 20px;"></i></button></li>
										
										
										<li id="manager_logout_panel"></li>
										
										
										<li id="manager_logout_panel2">
											
										</li><!--/.project-btn--> 
									</ul>
								</div><!-- /.navbar-collapse -->
							</div><!-- /.main-menu-->
						</div><!-- /.col-->
					</div><!-- /.row -->
					<div class="home-border"></div><!-- /.home-border-->
				</div><!-- /.container-->
			</div><!-- /.header-area -->

		</header><!-- /.top-area-->
		<!-- main-menu End -->

		
		<!--about-us start -->
		<section id="home" class="about-us">
			<section class="travel-box" style="background-color:transparent;">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="single-travel-boxes">
                                <div id="desc-tabs" class="desc-tabs">
    
                                    <ul class="nav nav-tabs" role="tablist">
    
                                        <li role="presentation" class="">
                                             <a style="font-weight:900;" href="#tours" aria-controls="tours" role="tab" data-toggle="tab" aria-expanded="false">
                                                 <i class="fa fa-tree"></i>
                                                 旅遊
                                             </a>
                                        </li>
    
                                        <li role="presentation" class="">
                                            <a style="font-weight:900;" href="#hotels" aria-controls="hotels" role="tab" data-toggle="tab" aria-expanded="false">
                                                <i class="fa fa-building"></i>
                                                設施
                                            </a>
                                        </li>
    
                                        
                                    </ul>
    
                                    <!-- Tab panes -->
                                    <div class="tab-content">
    
                                        <div role="tabpanel" class="tab-pane fade in active" id="tours">
                                            <div class="tab-para">
    
                                                <div class="row">
                                                    <div class="col-lg-4 col-md-4 col-sm-12">
                                                        <div class="single-tab-select-box">
    
                                                            <h2 style="font-weight:900;">目的地</h2>
    
                                                            
                                                                <input type="text" placeholder="台北" id="location_input" class="form-control" style="height: 45px;">

                                                            <!-- /.travel-select-icon -->
    
                                                            <!-- /.travel-select-icon -->
    
                                                        </div><!--/.single-tab-select-box-->
                                                    </div><!--/.col-->
    
                                                    <div class="col-lg-4 col-md-5 col-sm-6">
                                                        <div class="single-tab-select-box">
                                                            <h2 style="font-weight:900;">入住日期</h2>
                                                            <div class="travel-check-icon">
                                                                <form action="#">
                                                                    <input type="text" id="checkin" name="check_in" class="form-control" data-toggle="datepicker" placeholder="12 -01 - 2017 ">
                                                                    
                                                                </form>
                                                                
                                                            </div><!-- /.travel-check-icon -->
                                                        </div><!--/.single-tab-select-box-->
                                                    </div><!--/.col-->
    
                                                    <div class="col-lg-4 col-md-5 col-sm-6">
                                                        <div class="single-tab-select-box">
                                                            <h2 style="font-weight:900;">退房日期</h2>
                                                            <div class="travel-check-icon">
                                                                <form action="#">
                                                                    <input type="text" id="checkout" name="check_out" class="form-control" data-toggle="datepicker" placeholder="22 -01 - 2017 ">
                                                                </form>
                                                            </div><!-- /.travel-check-icon -->
                                                        </div><!--/.single-tab-select-box-->
                                                    </div><!--/.col-->
    
                                                   
    
                                                </div><!--/.row-->
    
                                                <div class="row">
                                                    <div class="col-sm-5">
                                                        <div class="travel-budget">
                                                            <div class="row">
                                                                <div class="col-md-3 col-sm-4">
                                                                    <h3>budget : </h3>
                                                                </div><!--/.col-->
                                                                <div class="co-md-9 col-sm-8">
                                                                    <div class="travel-filter">
                                                                        <div class="info_widget">
                                                                            <div class="price_filter">
                                                                                
                                                                                <div id="slider-range" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all"><div class="ui-slider-range ui-widget-header ui-corner-all" style="left: 22.3083%; width: 0%;"></div><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 22.3083%;"></span><span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0" style="left: 77.0083%;"></span></div><!--/.slider-range-->
    
                                                                                <div class="price_slider_amount">
                                                                                    <input type="text" id="amount" name="price" placeholder="Add Your Price">
                                                                                </div><!--/.price_slider_amount-->
                                                                            </div><!--/.price-filter-->
                                                                        </div><!--/.info_widget-->
                                                                    </div><!--/.travel-filter-->
                                                                </div><!--/.col-->
                                                            </div><!--/.row-->
                                                        </div><!--/.travel-budget-->
                                                    </div><!--/.col-->
                                                    <div class="clo-sm-7">
                                                        <div class="about-btn travel-mrt-0 pull-right">
                                                            <a href="#pack">
                                                                <button onclick="searching()" class="about-view travel-btn">
                                                                    search	
                                                                </button><!--/.travel-btn-->
                                                            </a>
                                                        </div><!--/.about-btn-->
                                                    </div><!--/.col-->
    
                                                </div><!--/.row-->
    
                                            </div><!--/.tab-para-->
    
                                        </div><!--/.tabpannel-->
    
                                        
    
                                        <div role="tabpanel" class="tab-pane fade " id="hotels">
                                            <div class="tab-para">
                                                <div class="trip-circle">
                                                    
                                                    <div class="single-trip-circle">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio0" name="radio" value="0">
                                                            <label for="radio01">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>嬰兒設施 <i class="fa fa-baby-carriage" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio0" name="radio" value="1">
                                                            <label for="radio02">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>供應早餐    <i class="fa fa-utensils" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 50px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio03" name="radio" value="2">
                                                            <label for="radio03">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>免費上網     <i class="fa fa-wifi" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 50px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio04" name="radio" value="3">
                                                            <label for="radio04">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>禁止吸菸     <i class="fa fa-smoking-ban" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 50px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio05" name="radio" value="4">
                                                            <label for="radio05">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>淋浴設施     <i class="fa fa-shower" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 50px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio04" name="radio" value="5">
                                                            <label for="radio04">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>卡拉OK     <i class="fa fa-microphone" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    
                                                    
                                                </div><!--/.trip-circle-->
                                                <br></br>
                                                <div class="trip-circle">
                                                    
                                                    <div class="single-trip-circle">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio06" name="radio" value="6">
                                                            <label for="radio06">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>接送服務 <i class="fa fa-shuttle-van" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-right: 10px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio07" name="radio" value="7">
                                                            <label for="radio07">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>免費停車    <i class="fa fa-parking" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 33px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio03" name="radio" value="8">
                                                            <label for="radio03">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>浴缸     <i class="fa fa-bath" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 86px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio04" name="radio" value="9">
                                                            <label for="radio04">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>游泳池     <i class="fa fa-swimmer" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->
                                                    <div class="single-trip-circle" style="padding-left: 63px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio05" name="radio" value="10">
                                                            <label for="radio05">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>私人海灘     <i class="fa fa-umbrella-beach" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                            
                                                    </div>
                                                    <div class="single-trip-circle" style="padding-left: 47px;">
                                                        <p style="font-size: 16px; font-weight: 300;">
                                                            <input type="checkbox" id="radio04" name="radio" value="11">
                                                            <label for="radio04">
                                                                <span class="round-boarder">
                                                                    <span class="round-boarder1"></span>
                                                                </span>電視機     <i class="fa fa-tv" style="font-size: 20px;"></i>
                                                            </label>
                                                        </p>
                                                        
                                                    </div><!--/.single-trip-circle-->   
                                                    </div><!--/.single-trip-circle-->
                                                    
                                                    <br></br>
                                                    <div class="trip-circle">
                                                    
                                                        <div class="single-trip-circle">
                                                            <p style="font-size: 16px; font-weight: 300;">
                                                                <input type="checkbox" id="radio06" name="radio" value="12">
                                                                <label for="radio06">
                                                                    <span class="round-boarder">
                                                                        <span class="round-boarder1"></span>
                                                                    </span>冷氣機  <i class="fa fa-snowflake" style="font-size: 20px;"></i>
                                                                </label>
                                                            </p>
                                                        </div><!--/.single-trip-circle-->
                                                        <div class="single-trip-circle" style="padding-left: 20px;">
                                                            <p style="font-size: 16px; font-weight: 300;">
                                                                <input type="checkbox" id="radio07" name="radio" value="13">
                                                                <label for="radio07">
                                                                    <span class="round-boarder">
                                                                        <span class="round-boarder1"></span>
                                                                    </span>洗衣機    <i class="fa fa-tshirt" style="font-size: 20px;"></i>
                                                                </label>
                                                            </p>
                                                            
                                                        </div><!--/.single-trip-circle-->
                                                        <div class="single-trip-circle" style="padding-left: 55px;">
                                                            <p style="font-size: 16px; font-weight: 300;">
                                                                <input type="checkbox" id="radio03" name="radio" value="14">
                                                                <label for="radio03">
                                                                    <span class="round-boarder">
                                                                        <span class="round-boarder1"></span>
                                                                    </span>酒吧     <i class="fa fa-glass-martini-alt" style="font-size: 20px;"></i>
                                                                </label>
                                                            </p>
                                                            
                                                        </div><!--/.single-trip-circle-->
                                                        <div class="single-trip-circle" style="padding-left: 85px;">
                                                            <p style="font-size: 16px; font-weight: 300;">
                                                                <input type="checkbox" id="radio04" name="radio" value="15">
                                                                <label for="radio04">
                                                                    <span class="round-boarder">
                                                                        <span class="round-boarder1"></span>
                                                                    </span>辦公空間     <i class="fa fa-briefcase" style="font-size: 20px;"></i>
                                                                </label>
                                                            </p>
                                                            
                                                        </div><!--/.single-trip-circle-->
                                                        <div class="single-trip-circle" style="padding-left: 55px;">
                                                            <p style="font-size: 16px; font-weight: 300;">
                                                                <input type="checkbox" id="radio05" name="radio" value="16">
                                                                <label for="radio05">
                                                                    <span class="round-boarder">
                                                                        <span class="round-boarder1"></span>
                                                                    </span>遊戲區     <i class="fa fa-gamepad" style="font-size: 20px;"></i>
                                                                </label>
                                                            </p>
                                                                
                                                        </div>
                                                        <div class="single-trip-circle" style="padding-left: 60px;">
                                                            <p style="font-size: 16px; font-weight: 300;">
                                                                <input type="checkbox" id="radio05" name="radio" value="17"> 
                                                                <label for="radio05">
                                                                    <span class="round-boarder">
                                                                        <span class="round-boarder1"></span>
                                                                    </span>SPA     <i class="fa fa-spa" style="font-size: 20px;"></i>
                                                                </label>
                                                            </p>
                                                                
                                                        </div>
                                                            
                                                     </div>
                                                    
                                                </div>
                                                <!--/.row-->
    
                                                <div class="row">
                                                    
                                                    <div class="clo-sm-5">
                                                        <div class="about-btn pull-right">
                                                            <a href="#pack">
                                                                <button onclick="searching()" class="about-view travel-btn">
                                                                    search	
                                                                </button><!--/.travel-btn-->
                                                            </a>
                                                        </div><!--/.about-btn-->
                                                    </div><!--/.col-->
                                                    
                                                </div><!--/.row-->
    
                                            </div>
    
                                        </div><!--/.tabpannel-->
    
                                    </div><!--/.tab content-->
                                </div><!--/.desc-tabs-->
                            </div><!--/.single-travel-box-->
                        </div><!--/.col-->
                    </div><!--/.row-->
                </div><!--/.container-->
    
            </section><!--/.container-->

		</section><!--/.about-us-->
		
		<!--packages start-->
		<section id="pack" class="packages">
			<div class="container">
				<div class="gallary-header text-center">
					<h2 style="font-weight:900;">
						搜尋結果
					</h2>
					
				</div><!--/.gallery-header-->
				<div class="packages-content">
					<div id="product_panel" class="row">

						

						

					</div><!--/.row-->
				</div><!--/.packages-content-->
			</div><!--/.container-->

		</section><!--/.packages-->
		<!--packages end-->

		



					
					

					


					


		
		

		

		
				
		<!-- footer-copyright end -->
		<script src="statics/js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>

        <script>
        
        var manager_id = sessionStorage.getItem("manager_id");
        var member_name = sessionStorage.getItem("member_name");
    	if(manager_id == null && member_name == null){
    		$("#manager_logout_panel").append('<a href="new_member_register.html">加入會員</a>')
    		$("#manager_logout_panel2").append('<a type="button"  href="new_login.html" class="btn" style="color:#FFFFFF; width: 120px;background: rgb(0, 216, 255);    border-width: 1px;border-style: solid; font-weight:500;border-color: rgb(0, 216, 255);border-radius: 5px;height: 40px;" >登入</a>')
    	}
    	
    	if(manager_id != null){
    		$("#manager_logout_panel").append('<a href="" id="logout">房東登出</a>')
    		$("#manager_logout_panel2").append('<a type="button"  href="new_manager.html" class="btn" style="color:#FFFFFF; width: 120px;background: rgb(0, 216, 255);    border-width: 1px;border-style: solid; font-weight:500;border-color: rgb(0, 216, 255);border-radius: 5px;height: 40px;" >管理住宿</a>')
    	}
    	if(member_name != null){
    		$("#manager_logout_panel").append('<a href="" id="logoutMember">會員登出</a>')
    		$("#manager_logout_panel2").append('<a type="button"  href="new_member.html" class="btn" style="color:#FFFFFF; width: 120px;background: rgb(0, 216, 255);    border-width: 1px;border-style: solid; font-weight:500;border-color: rgb(0, 216, 255);border-radius: 5px;height: 40px;" >'+member_name+'</a>')
    	}
    	
    	$( "#logout" ).click(function() {
    		sessionStorage.removeItem("manager_id"); 
    		sessionStorage.removeItem("manager_name"); 
    		sessionStorage.removeItem("manager_phone"); 
    		sessionStorage.removeItem("manager_email"); 
    		location.href = "browse.html";
    	})
    	$( "#logoutMember" ).click(function() {
    		sessionStorage.removeItem("member_id"); 
    		sessionStorage.removeItem("member_name"); 
    		sessionStorage.removeItem("member_phone"); 
    		sessionStorage.removeItem("member_email"); 
    		location.href = "browse.html";
    	})
        
       
           	// 列出符合篩選的商品
            function searching(){
            	
           		//$.ajax({
				
            	
            	$.ajax({ 
                    type: "GET",
                    url: "api/product.do",
                    crossDomain: true,
                    cache: false,
                    dataType: 'json',
                    timeout: 5000,
                    success: function (response) {                   	
                    	if (response.status == 200) {
                    	var product_panel = '';
                    	$("#product_panel").empty();
                    	
                    	$.each(response.response.data, function (){

                    
                    		if(filter(this) && location_input(this)&& dateSelect(this)){ 

                    		}
                    		if(filter(this) && location_input(this) && budget_check(this)){

                    			product_panel += addProduct(this);
                    		}
                    		
                    	})
                    	
                    	$("#product_panel").append(product_panel);
                    	
                      }
                    },
                    error: function () {
                      alert("無法連線到伺服器！");
                    }
                  });
            }
            
            //商品符合篩選條件return true
            function filter(data){
            	var vals = [];
        		$('input:checkbox:checked').each(function(index, item){
        			vals.push($(this).val());
        		});
        		var b = true;
        		for(let i = 0; i < vals.length; i++){
        			var s = "tag" + vals[i];    			
        			if(data[s]){
        				 b = true;        				
        			}else{
        				return false;
        				break;
        			}
        		}
        		return b;
            }
            
            //地點有使用者輸入的string return true
            function location_input(data){
            	var input_s = $("#location_input").val();
            	if(data["address"].includes(input_s) || data["name"].includes(input_s)){
            		return true;
            	}
            	return false;           	
            }
            

            //選擇入住時段
            function dateSelect(data){
            	var return_status = '';
            	var dateary1 = document.getElementsByName('check_in');
            	var dateary2 = document.getElementsByName('check_out');
            	var datetext1 = new String(dateary1[0].val);
            	var datetext2 = new String(dateary2[0].val);            	           	
            	
            	var dateay1 = datetext1.split("/");
            	var dateay2 = datetext2.split("/");
            	
            	var date_st1 = new Date(dateay1[2],dateay1[1],dateay1[0]);
            	var date_st2 = new Date(dateay2[2],dateay2[1],dateay2[0]);
            	
            	if (datetext1==null||datetext2==null){
            		alert("check in/out can't be null!!");
            	}else{
            		$.ajax({ 
                    type: "GET",
                    url: "api/order.do",
                    data:{"name":data.name},
                    crossDomain: true,
                    cache: false,
                    dataType: 'json',
                    timeout: 5000,
                    success: function (response) {                   	                   	
                    	if (response.status == 200) {
                    	var product_panel = '';
                    	$("#product_panel").empty();
                    	
                    	$.each(response.response.data.order_info, function (){
                    		System.out.println("test");
                    		if(date_st1.valueOf()<this.check_in.valueOf()&&date_st2.valueOf()<=this.check_in.valueOf()){
                    			return_status = true;
                    		}
                    		else if(date_st1.valueOf()>=this.check_out.valueOf()&&date_st2.valueOf()>this.check_out.valueOf()){
                    			return_status = true;
                    		}
                    		else{
                    			return_status = false;
                    		}
                    	})                    	
                                    	
                      }
                    },
                    error: function () {
                      alert("無法連線到伺服器！");
                    }
                  });            		
            	} 
            	return return_status;
            	
            }

            // 價格在預算之間return true
            function budget_check(data){
            	let budget_input = $("#amount").val();
             	var budget = budget_input.split(" ");
             	var low = parseInt(budget[0].replace("$", ""));
             	var high = parseInt(budget[2].replace("$", ""));
             	if(low <= data["price"] && data["price"] <= high){
             		return true
             	}
                return false
            }
            

            
            function getAllProduct() {
                $.ajax({
                  type: "GET",
                  url: "api/product.do",
                  crossDomain: true,
                  cache: false,
                  dataType: 'json',
                  timeout: 5000,
                  success: function (response) {
                    if (response.status == 200) {
                  	var product_panel = '';
                  	
                  	$.each(response.response.data, function (){
                  		product_panel += addProduct(this);
                  	})
                  	
                  	$("#product_panel").append(product_panel);
                  	//setButtonFunction();
                  	//checkIfExistInCart();
                    }
                  },
                  error: function () {
                    alert("無法連線到伺服器！");
                  }
                });
            }  

            getAllProduct();
            
            // 取前4個tag顯示在商品預覽
			function getfourtag(data){
				const all_tags = []
				all_tags[0] = "嬰兒設施";
				all_tags[1] = "供應早餐";
				all_tags[2] = "免費上網";
				all_tags[3] = "禁止吸菸";
				all_tags[4] = "淋浴設施";
				all_tags[5] = "卡拉OK";
				all_tags[6] = "免費接送";
				all_tags[7] = "免費停車";
				all_tags[8] = "浴缸";
				all_tags[9] = "游泳池";
				all_tags[10] = "私人海灘";
				all_tags[11] = "電視機";
				all_tags[12] = "冷氣機";
				all_tags[13] = "洗衣機";
				all_tags[14] = "酒吧";
				all_tags[15] = "辦公空間";
				all_tags[16] = "遊戲區";
				all_tags[17] = "SPA";
			
				
				const four_tags = [" ", " ", " ", " "];
				var j = 0;
				
				for (let i = 0; i < all_tags.length; i++){
					if (j < 4){
						var s = "tag" + i;
						if (data[s]){
							four_tags[j] = all_tags[i];
							j++;
						}
					} else break;					
				}
				return four_tags;
			}
			
            function addProduct(data){
            	
            	const four_tags = getfourtag(data);
            	let inner_html = '';
            	inner_html += '<div class="col-md-4 col-sm-6">';
            	inner_html += '<div class="single-package-item">';
            	inner_html += '<div style="height:239.76px; width:360px; background-image: url(' + data.image + ');background-size:100%;"></div>';
            	
            	inner_html += '<div class="single-package-item-txt">';
            	inner_html += '<h3>'+data.name + '<span class="pull-right">$' + data.price + '</span> </h3>';
            	inner_html += '<div class="packages-para">';
            	inner_html += '<p>';
            	inner_html += '<span>';
            	inner_html += '<i class="fa fa-angle-right"></i>  ' + four_tags[0];           	
            	inner_html += '</span>';
            	inner_html += '<i class="fa fa-angle-right"></i>  ' + four_tags[1];
            	inner_html += '</p>';
            	inner_html += '<p> <span>';
            	inner_html += '<i class="fa fa-angle-right"></i>  ' + four_tags[2];            	
            	inner_html += '</span>';
            	inner_html += '<i class="fa fa-angle-right"></i>  ' + four_tags[3] + '</p>';            	
            	inner_html += '</div>';
          		inner_html += '<div class="packages-review">';
      			inner_html += '<p>'   			
      			let i = 0;
      			// 沒滿5星則加上非黃色星星
   				while(i < 5){
   					if(i < data["avgrate"]){
   						inner_html += '<i class="fa fa-star"></i>';
   					} else{
   						inner_html += '<i class="fa fa-star" style="color:#aaa;"></i>';
   					}
   					i ++;
   				}
   				inner_html += '<span>即將客滿!</span>';
   				inner_html += '</p>';
   				inner_html += '</div>';
   				inner_html += '<div class="about-btn">';
   				inner_html += '<button  class="about-view packages-btn">';
   				inner_html += '<a href="product_infor.html?id=' + data["id"] +'&manager_id='+data["manager_id"]+'&room_name='+data["name"]+ '" style="font-size: 14px; color: #fff;">'
   				inner_html += 'book now'
   				inner_html += '</a>';
   				inner_html += '</button>';
   				inner_html += '</div>';
   				inner_html += '</div>';
   				inner_html += '</div>';
   				inner_html += '</div>';
            	
            	return inner_html;	
            }
           
        </script>

		<script src="assets/js/jquery.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->

		<!--modernizr.min.js-->
		<script  src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>


		<!--bootstrap.min.js-->
		<script  src="assets/js/bootstrap.min.js"></script>

		<!-- bootsnav js -->
		<script src="assets/js/bootsnav.js"></script>

		<!-- jquery.filterizr.min.js -->
		<script src="assets/js/jquery.filterizr.min.js"></script>

		<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>

		<!--jquery-ui.min.js-->
        <script src="assets/js/jquery-ui.min.js"></script>

        <!-- counter js -->
		<script src="assets/js/jquery.counterup.min.js"></script>
		<script src="assets/js/waypoints.min.js"></script>

		<!--owl.carousel.js-->
        <script  src="assets/js/owl.carousel.min.js"></script>

        <!-- jquery.sticky.js -->
		<script src="assets/js/jquery.sticky.js"></script>

        <!--datepicker.js-->
        <script  src="assets/js/datepicker.js"></script>

		<!--Custom JS-->
		<script src="assets/js/custom.js"></script>


	</body>

</html>