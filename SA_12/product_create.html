<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Travel 刊登新房間</title>
    <link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>
    
    

    <!--font-family-->
		<link href="https://fonts.googleapis.com/css?family=Rufina:400,700" rel="stylesheet" />

		<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet" />

		<!-- favicon img -->
		<link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>

		<!--font-awesome.min.css-->
		<link rel="stylesheet" href="assets/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
		<!--animate.css-->
		<link rel="stylesheet" href="assets/css/animate.css" />

		<!--hover.css-->
		<link rel="stylesheet" href="assets/css/hover-min.css">

		<!--datepicker.css-->
		<link rel="stylesheet"  href="assets/css/datepicker.css" >

		<!--owl.carousel.css-->
        <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
		<link rel="stylesheet" href="assets/css/owl.theme.default.min.css"/>

		<!-- range css-->
        <link rel="stylesheet" href="assets/css/jquery-ui.min.css" />

		<!--bootstrap.min.css-->
        <link href="statics/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="assets/css/bootstrap.min.css" />

		<!-- bootsnav -->
		<link rel="stylesheet" href="assets/css/bootsnav.css"/>

		<!--style.css-->
		<link rel="stylesheet" href="assets/css/style.css" />

		<!--responsive.css-->
		<link rel="stylesheet" href="assets/css/responsive.css" />

        <!--original.css-->
        <link rel="stylesheet" href="assets/css/original.css" />



		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->

		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
        <style>
            .navfont{
                padding-top: 10px; background-color:transparent; border: none;color: #FFFFFF;
            }
            
            .fa:hover{
                color: rgb(0, 0, 0);
            }
        </style>

    <script src="statics/js/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
</head>

<body>
    
    <div id="container">
        <!--
        <div id="header">
            <h1><a href="http://cakephp.org/">CakePHP: the rapid development php framework</a></h1>
        </div>
        -->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: rgba(77,78,84,1);">
            <div class="container" style="height:78px; width: 1170px; margin-right: auto;margin-left: auto;"> 
              <a class="navbar-brand" href="#" style="color:#FFFFFF; font-weight: 600; font-size: 24px;">Tour<span style="color:rgb(0, 216, 255);">Nest</span></a>
    
    
                <ul class="navbar-nav  navbar-right  ms-auto">
                  <li class="nav-item" style="padding-right:15px;">
                    <a class="nav-link" style="color:#FFFFFF; font-size: 16.5px; " href="#">刊登家中空房</a>
                  </li>
                  <li class="nav-item" style="padding-right:20px;" >
                    <a class="nav-link" style="color:#FFFFFF; font-size: 16.5px;" href="#">加入會員</a>
                  </li>
                  <li class="nav-item" style="padding-right:15px;">
                    <button  style="color:#FFFFFF; width: 120px;background: rgb(0, 216, 255);    border-width: 1px;
                    border-style: solid;font-size: 14px;
                    border-color: rgb(0, 216, 255);border-radius: 5px;height: 40px;" >登入</button>
                  </li>
                </ul>
    
    
            </div>
        </nav>
        
        <div id="content">
            <!--
            <h2>註冊會員資料</h2>
            <a href="index.html">會員清單</a>
            <a href="product.html">購物車模組</a>

            <div id="flashMessage" class="message" style="display: none;"></div>
	
			<form id="uploadForm" action="upload" method="post" enctype="multipart/form-data">
				<div class="input password required">
                    <label for="product_image">圖片</label>
                     <input id="ajaxfile" type="file" name="file"/>
                </div>
			
			
            
                <div style="display:none;"><input type="hidden" name="_method" value="POST"></div>
                <div class="input text required">
                    <label for="member_name">商品名</label>
                    <input name="name" maxlength="30" type="text" id="member_name" required="required" >
                </div>
                <div class="input email required">
                    <label for="product_price">價格</label>
                    <input name="email" maxlength="50" type="email" id="product_price" required="required">
                </div>
                
      
                *****  <div class="input password required">
                    <label for="product_image">圖片</label>
                    <input name="password" type="text" id="product_image" required="required">
                </div>******
                <div class="input text">
                    <label for="product_description">描述</label>
                    <input name="login_times" type="text" id="product_description" required="required">
                </div>
                <div class="submit"><input type="button" value="更新" id="submit"></div>
            </form>
            -->
            <section class="about-us">
            <div id="post_frame">
                <h3 class=" mt-3 mb-3" style="margin-inline-start:-350px;">刊登新房間</h3>
                <hr>
                <!--<p id="image_logo"><img src=""></p>-->
                <form method="post" action="login.js">
                    <p>
                        <label for="product_image" class="col-lg-3 col-md-3 col-sm-3">圖片</label>
                        <input id="ajaxfile" type="file" name="file"/>
                    </p>
                     <div class="space"></div>
                    <p> 
                        <label for="member_name" class=" col-lg-3 col-md-3 col-sm-3">商品名</label>
                    </p>
                        <input name="name" class="form-control" maxlength="30" size="30" type="text" id="member_name" required="required" >    
                    
                    <div class="space"></div>
                    <p>
                        <label for="product_price" class="col-lg-3 col-md-3 col-sm-3">價格</label>
                        <input name="email" class="form-control" maxlength="50" type="email" id="product_price" required="required">
                    </p>
                    <div class="space"></div>
                    <p>
                        <label for="product_description" class="col-lg-3 col-md-3 col-sm-3">描述</label>
                        <!--<input name="login_times" class="form-control" type="text" id="product_description" style="height: 90px;"required="required">-->
                        <textarea class="form-control" id="product_description" style="resize:none" rows="3" name="S1" cols="20"></textarea>
                    </p>
                    <div class="space"></div>
                    <div id="login_control">
                        <input type="button" class="btn_login" id="submit"  value="新增" />
                        
                    </div>
                </form>
            </div>
            </section>

            <script type="text/javascript">
                // 取得網址參數
               // var url_string = window.location.href;
               // var url = new URL(url_string);
                var id = 1;
                var sql_num = 0;
				
                function updateMember(id) {
                   
                    var selectedFile=new FormData();
                    //var img = $('#ajaxfile')[0];
                    var name = $('#member_name').val();
                    var price = $('#product_price').val();
                    var describe = $('#product_description').val();
                                                   
                    selectedFile.append("file", ajaxfile.files[0]);
                    selectedFile.append("name", name);
                  
                    selectedFile.append("price", price);
                    selectedFile.append("describe", describe);
                    

                       
                        // 發出POST的PUT請求
                    $.ajax({
                    	/*type: "DELETE",
                        url: "api/product.do",
                        data: data_string,
                        crossDomain: true,
                        cache: false,
                        dataType: 'json',
                        timeout: 5000,*/
                        type: "POST",
                        url: "api/product.do",
                        cache: false,
                        
                        data: selectedFile,
                        dtatype: "json",
                        processData:false,
                        contentType:false,
                        success: function (response) {
                            $('#flashMessage').html(response.message);
                            $('#flashMessage').show();
                            if(response.status == 200){
                            	updateSQLTable(response.response);
                                //getMember();
                            }
                        },
                        error: function () {
                            alert("無法連線到伺服器！");
                        }
                });
     
            }
            
             // 更新SQL指令歷史表格
            function updateSQLTable(data) {
                var time = (data.time / 1000000).toFixed(2);
                var table_html = "";
                
                sql_num += 1

                table_html += '<tr>';
                table_html += '<td>' + sql_num + '</td>';
                table_html += '<td>' + data.sql + '</td>';
                table_html += '<td style="text-align: right">' + '0' + '</td>';
                table_html += '<td style="text-align: right">' + data.row + '</td>';
                table_html += '<td style="text-align: right">' + data.row + '</td>';
                table_html += '<td style="text-align: right">' + time + '</td>';
                table_html += '</tr>';
                $("#sql_log > tbody").append(table_html);
                $("#sql_summary").html("(default) " + data.row + " queries took " + time + " ms");
            }

                                 
            $('#submit').click(function() {
            	updateMember(id)
            });
               
             
            </script>
        </div>
        <!--
        <div id="footer">
            <a href="http://www.cakephp.org/" target="_blank" id="cake-powered"><img src="statics/img/cake.power.gif" alt="CakePHP: the rapid development php framework" border="0"></a>
            <p>CakePHP 2.6.10</p>
        </div>
        -->
    </div>

    
</body>

</html>